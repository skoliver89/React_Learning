<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8" />
    <title>React And Redux DEMO: Existing App</title>
  </head>

  <body>
    <h1>This Is Just A Basic Demonstration</h1>
    <p>There is likely no connection going to happen to React or Redux Devtools.</p>
    <b>If you need or want access to the dev tools for this example:</b>
    <br />
    <p></p>go to the extension details and allow access to file urls</p>
    <hr />
    <!-- ~ DIV TO HOLD REACT ELEMENTS! ~ -->
    <div id="root"></div>

    <!-- ~ SCRIPTS HERE! ~ -->
    <script
      src="https://unpkg.com/react@16.8.3/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@16.8.3/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/redux@4.0.1/dist/redux.min.js"></script>
    <script src="https://unpkg.com/react-redux@6.0.1/dist/react-redux.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- ~ REACT JSX CODE HERE! ~ -->
    <script type="text/babel">
      //Reducer to parse actions to the store
      function reducer(state = {message: 'Hello, ', name: 'Stephen'}, action) {
        switch (action.type) {
          case 'GREETING_ED':
            return Object.assign(
              {},
              state,
              {name: 'Ed'}
            );
          case 'GREETING_SAL':
            return Object.assign(
              {},
              state,
              {name: 'Sal'}
            );
        
          default:
            return state;
        }
      }

      //Redux Store for the React Components
      let store = Redux.createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());

      //Map the state in store to props
      function mapStateToProps(state) {
        return {
          message: state.message,
          name: state.name
        }
      }

      //Map the Dispatch to the Props
      function mapDispatchToProps(dispatch) {
        return {
          greetEd: () => {
            dispatch({type: 'GREETING_ED'});
          },
          greetSal: () => {
            dispatch({type: 'GREETING_SAL'});
          }
        };
      }

      //A simple component to use data in the Redux Store
      const Hello = ReactRedux.connect(mapStateToProps, mapDispatchToProps)(
        function ({message, name, greetEd, greetSal}) {
          return (
            <React.Fragment>
              <h3 onClick={greetEd}>{message}</h3>
              <h3 onClick={greetSal}>{name}</h3>
            </React.Fragment>
          );
        }
      );

      //Render the React Component ...
      //giving it access to the store via a provider
      ReactDOM.render(
        <ReactRedux.Provider store={store}>
          <Hello />
        </ReactRedux.Provider>,
        document.getElementById("root")
      );
    </script>
  </body>
</html>
